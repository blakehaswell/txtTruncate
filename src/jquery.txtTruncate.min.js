// txtTruncate - a jQuery plugin to truncate text
// version 1.0.2
// https://github.com/blakehaswell/txtTruncate
//
// Copyright (c) 2011-2012 Blake Haswell
// Licensed under the MIT license: http://opensource.org/licenses/MIT
(function(g){g.fn.txtTruncate=function(c){var a={end:"...",lines:null};c&&g.extend(a,c);return this.each(function(){function i(c){d=h.substring(0,c);b.html(d+a.end)}function c(){b.html(h);d=h;if((e=Math.ceil(b.height()/f))>a.lines){if(e>a.lines+1){j=Math.round(h.length/e);for(i((a.lines+1)*j);(e=Math.ceil(b.height()/f))>a.lines+1;)i(d.length-Math.round(j/2))}for(;(e=Math.ceil(b.height()/f))>a.lines;)i(d.length-1)}}var b=g(this),f=parseInt(b.css("line-height"),10),h=b.text(),j,e,d,k;if(!a.lines)k=
parseInt(b.css("max-height"),10),a.lines=k>f?Math.floor(k/f):1;b.css({height:"auto",maxHeight:"none",minHeight:0});g(window).bind("resize",c);c()})}})(jQuery);