// txtTruncate - a jQuery plugin to truncate text
// version 1.0
// https://github.com/blakehaswell/txtTruncate
//
// Copyright (c) 2011 Blake Haswell
// Licensed under the MIT license: http://opensource.org/licenses/MIT
(function(f){f.fn.txtTruncate=function(j){var a={end:"...",lines:null};return this.each(function(){function h(c){d=g.substring(0,c);b.html(d+a.end)}function k(){b.html(g);d=g;if((c=Math.ceil(b.height()/e))>a.lines){if(c>a.lines+1){i=Math.round(g.length/c);for(h((a.lines+1)*i);(c=Math.ceil(b.height()/e))>a.lines+1;)h(d.length-Math.round(i/2))}for(;(c=Math.ceil(b.height()/e))>a.lines;)h(d.length-1)}}j&&f.extend(a,j);var b=f(this),g=b.text(),d,e=parseInt(b.css("line-height")),c,i;if(!a.lines){var l=
parseInt(b.css("max-height"));a.lines=l>e?Math.floor(l/e):1}b.css({height:"auto",maxHeight:"none"});f(window).bind("resize",k);k()})}})(jQuery);