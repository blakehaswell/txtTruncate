// txtTruncate - a jQuery plugin to truncate text
// version 1.0.1
// https://github.com/blakehaswell/txtTruncate
//
// Copyright (c) 2011-2012 Blake Haswell
// Licensed under the MIT license: http://opensource.org/licenses/MIT
(function(f){f.fn.txtTruncate=function(k){var a={end:"...",lines:null};return this.each(function(){function h(c){d=g.substring(0,c);b.html(d+a.end)}function l(){b.html(g);d=g;if((c=Math.ceil(b.height()/e))>a.lines){if(c>a.lines+1){i=Math.round(g.length/c);for(h((a.lines+1)*i);(c=Math.ceil(b.height()/e))>a.lines+1;)h(d.length-Math.round(i/2))}for(;(c=Math.ceil(b.height()/e))>a.lines;)h(d.length-1)}}k&&f.extend(a,k);var b=f(this),e=parseInt(b.css("line-height"),10),g=b.text(),i,c,d,j;if(!a.lines)j=
parseInt(b.css("max-height"),10),a.lines=j>e?Math.floor(j/e):1;b.css({height:"auto",maxHeight:"none",minHeight:0});f(window).bind("resize",l);l()})}})(jQuery);