// txtTruncate - a jQuery plugin to truncate text
// version 1.0
// https://github.com/blakehaswell/txtTruncate
//
// Copyright (c) 2011 Blake Haswell
// Licensed under the MIT license: http://opensource.org/licenses/MIT
(function(e){e.fn.txtTruncate=function(j){var a={end:"...",lines:null};return this.each(function(){function f(c){currText=g.substring(0,c);b.text(h+a.end)}function k(){b.text(g);if((c=Math.ceil(b.height()/d))>a.lines){if(c>a.lines+1){i=Math.round(g.length/c);for(f((a.lines+1)*i);(c=Math.ceil(b.height()/d))>a.lines+1;)f(h.length-Math.round(i/2))}for(;(c=Math.ceil(b.height()/d))>a.lines;)f(h.length-1)}}j&&e.extend(a,j);var b=e(this),g=b.text(),h,d=parseInt(b.css("line-height")),c,i;if(!a.lines){var l=
parseInt(b.css("max-height"));a.lines=l>d?Math.floor(l/d):1}b.css({height:"auto",maxHeight:"none"});e(window).bind("resize",k);k()})}})(jQuery);